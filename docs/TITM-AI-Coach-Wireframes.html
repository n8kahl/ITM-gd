<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TITM AI Coach ‚Äî Interactive Wireframes</title>
<style>
  :root {
    --bg: #09090B;
    --surface: #0D0F13;
    --surface-2: #111318;
    --border: rgba(255,255,255,0.07);
    --border-light: rgba(255,255,255,0.12);
    --text: rgba(255,255,255,0.87);
    --text-dim: rgba(255,255,255,0.45);
    --text-faint: rgba(255,255,255,0.25);
    --emerald: #10B981;
    --emerald-dim: rgba(16,185,129,0.15);
    --emerald-ring: rgba(16,185,129,0.4);
    --red: #EF4444;
    --red-dim: rgba(239,68,68,0.15);
    --amber: #F59E0B;
    --amber-dim: rgba(245,158,11,0.15);
    --sky: #38BDF8;
    --champagne: #F3E5AB;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: -apple-system, BlinkMacSystemFont, 'Inter', 'Segoe UI', sans-serif;
    overflow-x: hidden;
  }

  /* ‚îÄ‚îÄ‚îÄ Top Navigation ‚îÄ‚îÄ‚îÄ */
  .top-bar {
    position: sticky; top: 0; z-index: 100;
    display: flex; align-items: center; justify-content: space-between;
    padding: 12px 24px;
    background: rgba(9,9,11,0.92);
    backdrop-filter: blur(16px);
    border-bottom: 1px solid var(--border);
  }
  .top-bar h1 { font-size: 14px; font-weight: 600; letter-spacing: -0.01em; }
  .top-bar h1 span { color: var(--emerald); }
  .top-bar .subtitle { font-size: 11px; color: var(--text-dim); margin-top: 2px; }

  /* ‚îÄ‚îÄ‚îÄ Phase Tabs ‚îÄ‚îÄ‚îÄ */
  .phase-tabs {
    display: flex; gap: 4px; overflow-x: auto; padding: 12px 24px;
    border-bottom: 1px solid var(--border);
    background: var(--surface);
    scrollbar-width: none;
  }
  .phase-tabs::-webkit-scrollbar { display: none; }
  .phase-tab {
    flex-shrink: 0;
    padding: 8px 16px; border-radius: 8px;
    font-size: 12px; font-weight: 500; color: var(--text-dim);
    background: transparent; border: 1px solid transparent;
    cursor: pointer; transition: all 0.2s;
    white-space: nowrap;
  }
  .phase-tab:hover { color: var(--text); background: rgba(255,255,255,0.03); }
  .phase-tab.active {
    color: var(--emerald); background: var(--emerald-dim);
    border-color: var(--emerald-ring);
  }
  .phase-tab .tag {
    display: inline-block; font-size: 9px; font-weight: 700;
    padding: 1px 5px; border-radius: 4px; margin-right: 6px;
    text-transform: uppercase; letter-spacing: 0.05em;
    vertical-align: 1px;
  }
  .tag-mobile { background: rgba(56,189,248,0.15); color: #7DD3FC; }
  .tag-desktop { background: rgba(168,85,247,0.15); color: #C4B5FD; }

  /* ‚îÄ‚îÄ‚îÄ Phase Content ‚îÄ‚îÄ‚îÄ */
  .phase-content { display: none; padding: 32px 24px; max-width: 1200px; margin: 0 auto; }
  .phase-content.active { display: block; }

  .phase-header { margin-bottom: 24px; }
  .phase-header h2 { font-size: 20px; font-weight: 700; letter-spacing: -0.02em; }
  .phase-header p { font-size: 13px; color: var(--text-dim); margin-top: 6px; line-height: 1.6; max-width: 640px; }

  .before-after {
    display: grid; grid-template-columns: 1fr 1fr; gap: 24px;
    margin-bottom: 24px;
  }
  @media (max-width: 768px) { .before-after { grid-template-columns: 1fr; } }

  .wireframe-label {
    font-size: 10px; font-weight: 700; text-transform: uppercase;
    letter-spacing: 0.1em; margin-bottom: 10px;
    display: flex; align-items: center; gap: 8px;
  }
  .wireframe-label::after {
    content: ''; flex: 1; height: 1px; background: var(--border);
  }
  .label-before { color: #F87171; }
  .label-after { color: var(--emerald); }
  .label-neutral { color: var(--text-dim); }

  /* ‚îÄ‚îÄ‚îÄ Phone Frame ‚îÄ‚îÄ‚îÄ */
  .phone-frame {
    width: 375px; height: 812px; max-width: 100%;
    border: 2px solid var(--border-light);
    border-radius: 40px;
    background: var(--bg);
    overflow: hidden;
    position: relative;
    margin: 0 auto;
    box-shadow: 0 20px 60px rgba(0,0,0,0.4);
  }
  .phone-notch {
    width: 160px; height: 28px; margin: 0 auto;
    background: var(--bg);
    border-radius: 0 0 20px 20px;
    border: 1px solid var(--border);
    border-top: none;
  }
  .phone-screen {
    height: calc(100% - 28px);
    display: flex; flex-direction: column;
    overflow: hidden;
  }

  /* ‚îÄ‚îÄ‚îÄ Desktop Frame ‚îÄ‚îÄ‚îÄ */
  .desktop-frame {
    width: 100%; max-width: 960px;
    height: 580px;
    border: 2px solid var(--border-light);
    border-radius: 12px;
    background: var(--bg);
    overflow: hidden;
    position: relative;
    margin: 0 auto;
    box-shadow: 0 20px 60px rgba(0,0,0,0.4);
  }
  .desktop-titlebar {
    height: 32px; display: flex; align-items: center;
    padding: 0 12px; gap: 6px;
    background: var(--surface); border-bottom: 1px solid var(--border);
  }
  .dot { width: 10px; height: 10px; border-radius: 50%; }
  .dot-r { background: #FF5F56; }
  .dot-y { background: #FFBD2E; }
  .dot-g { background: #27C93F; }
  .desktop-screen {
    display: flex; height: calc(100% - 32px);
  }

  /* ‚îÄ‚îÄ‚îÄ Shared UI Elements ‚îÄ‚îÄ‚îÄ */
  .status-bar {
    display: flex; justify-content: space-between; align-items: center;
    padding: 6px 20px; font-size: 10px; color: var(--text-dim);
  }
  .nav-header {
    display: flex; align-items: center; justify-content: space-between;
    padding: 10px 16px; border-bottom: 1px solid var(--border);
  }
  .nav-header .title { font-size: 15px; font-weight: 600; }

  /* Chat area */
  .chat-area {
    flex: 1; overflow-y: auto; padding: 12px 16px;
    display: flex; flex-direction: column; gap: 12px;
  }
  .chat-bubble {
    max-width: 85%; padding: 10px 14px;
    border-radius: 16px; font-size: 13px; line-height: 1.5;
  }
  .bubble-user {
    align-self: flex-end;
    background: var(--emerald-dim); color: rgba(255,255,255,0.85);
    border: 1px solid var(--emerald-ring);
    border-bottom-right-radius: 4px;
  }
  .bubble-ai {
    align-self: flex-start;
    background: rgba(255,255,255,0.04); color: rgba(255,255,255,0.75);
    border: 1px solid var(--border);
    border-bottom-left-radius: 4px;
  }

  /* Widget card */
  .widget-card {
    margin-top: 8px; padding: 10px 12px;
    border-radius: 12px;
    background: rgba(255,255,255,0.03);
    border: 1px solid var(--border);
    font-size: 11px;
  }
  .widget-card .wc-header {
    display: flex; justify-content: space-between; align-items: center;
    margin-bottom: 6px;
  }
  .widget-card .wc-symbol { font-weight: 600; color: white; }
  .widget-card .wc-badge {
    font-size: 9px; padding: 2px 6px; border-radius: 4px;
    background: var(--emerald-dim); color: var(--emerald);
  }
  .widget-card .wc-levels {
    display: flex; gap: 12px; font-size: 10px; color: var(--text-dim);
  }
  .widget-card .wc-actions {
    display: flex; gap: 6px; margin-top: 8px;
  }
  .wc-btn {
    padding: 4px 10px; border-radius: 6px; font-size: 10px; font-weight: 500;
    border: 1px solid var(--border); background: rgba(255,255,255,0.03);
    color: var(--text-dim); cursor: pointer; transition: all 0.15s;
  }
  .wc-btn:hover { border-color: var(--emerald-ring); color: var(--emerald); }
  .wc-btn-primary {
    background: var(--emerald-dim); border-color: var(--emerald-ring);
    color: var(--emerald);
  }

  /* Inline mini chart */
  .inline-chart {
    margin-top: 8px; border-radius: 12px;
    border: 1px solid var(--border);
    overflow: hidden; cursor: pointer;
    transition: border-color 0.2s;
  }
  .inline-chart:hover { border-color: var(--emerald-ring); }
  .inline-chart-header {
    display: flex; justify-content: space-between; align-items: center;
    padding: 6px 10px; border-bottom: 1px solid rgba(255,255,255,0.04);
    font-size: 11px;
  }
  .inline-chart-header .symbol { font-weight: 600; color: white; }
  .inline-chart-header .tf { font-size: 9px; color: var(--text-faint); margin-left: 6px; }
  .inline-chart-header .expand { color: var(--text-faint); font-size: 10px; }
  .chart-canvas {
    height: 180px; background: linear-gradient(180deg, rgba(16,185,129,0.04) 0%, transparent 100%);
    position: relative; display: flex; align-items: flex-end;
    padding: 0 8px 8px;
  }
  .chart-line {
    position: absolute; left: 8px; right: 8px; bottom: 8px; top: 16px;
  }
  .chart-line svg { width: 100%; height: 100%; }
  .chart-level {
    position: absolute; left: 0; right: 0;
    border-top: 1px dashed;
    font-size: 8px; padding-left: 4px;
  }

  /* Chat input */
  .chat-input-area {
    padding: 10px 16px; border-top: 1px solid var(--border);
    background: var(--surface);
  }
  .chat-input {
    display: flex; align-items: center; gap: 8px;
    background: rgba(255,255,255,0.04);
    border: 1px solid var(--border);
    border-radius: 12px; padding: 10px 14px;
  }
  .chat-input-text {
    flex: 1; font-size: 13px; color: var(--text-faint);
  }
  .send-btn {
    width: 28px; height: 28px; border-radius: 8px;
    background: var(--emerald); display: flex;
    align-items: center; justify-content: center;
  }
  .send-btn svg { width: 14px; height: 14px; fill: white; }

  /* Quick-access bar */
  .quick-access-bar {
    display: flex; align-items: center; gap: 2px;
    padding: 6px 16px; border-top: 1px solid var(--border);
    background: var(--surface);
  }
  .qa-btn {
    flex: 1; display: flex; flex-direction: column; align-items: center; gap: 2px;
    padding: 6px 4px; border-radius: 8px;
    font-size: 9px; color: var(--text-dim);
    cursor: pointer; transition: all 0.15s;
  }
  .qa-btn:hover, .qa-btn.active { color: var(--emerald); background: var(--emerald-dim); }
  .qa-icon {
    width: 20px; height: 20px; border-radius: 6px;
    background: rgba(255,255,255,0.04); border: 1px solid var(--border);
    display: flex; align-items: center; justify-content: center;
    font-size: 11px;
  }

  /* Tool sheet */
  .tool-sheet-overlay {
    position: absolute; inset: 0; z-index: 20;
    background: var(--bg);
    display: flex; flex-direction: column;
    animation: slideUp 0.35s cubic-bezier(0.32,0.72,0,1);
  }
  @keyframes slideUp {
    from { transform: translateY(100%); }
    to { transform: translateY(0); }
  }
  .sheet-header {
    display: flex; align-items: center; justify-content: space-between;
    padding: 12px 16px; border-bottom: 1px solid var(--border);
  }
  .sheet-header h3 { font-size: 14px; font-weight: 600; }
  .sheet-close {
    display: flex; align-items: center; gap: 4px;
    font-size: 11px; color: var(--text-dim);
    padding: 4px 10px; border-radius: 6px;
    background: rgba(255,255,255,0.03); border: 1px solid var(--border);
    cursor: pointer;
  }
  .sheet-body { flex: 1; overflow: hidden; padding: 16px; }

  /* Full chart mockup */
  .full-chart-area {
    height: 100%; border-radius: 8px; overflow: hidden;
    border: 1px solid var(--border);
    background: linear-gradient(180deg, rgba(16,185,129,0.02) 0%, transparent 100%);
    position: relative;
  }
  .chart-toolbar {
    display: flex; gap: 6px; padding: 8px 12px;
    border-bottom: 1px solid var(--border);
    font-size: 10px;
  }
  .chart-toolbar-btn {
    padding: 4px 8px; border-radius: 4px;
    background: rgba(255,255,255,0.04); border: 1px solid var(--border);
    color: var(--text-dim); font-size: 10px;
  }
  .chart-toolbar-btn.active { border-color: var(--emerald-ring); color: var(--emerald); }

  /* Bottom nav */
  .bottom-nav {
    display: flex; justify-content: space-around; align-items: center;
    padding: 8px 0 20px; border-top: 1px solid var(--border);
    background: var(--surface);
  }
  .bnav-item {
    display: flex; flex-direction: column; align-items: center; gap: 2px;
    font-size: 9px; color: var(--text-faint);
  }
  .bnav-item.active { color: var(--emerald); }
  .bnav-dot { width: 4px; height: 4px; border-radius: 50%; background: var(--emerald); }

  /* ‚îÄ‚îÄ‚îÄ Desktop Specific ‚îÄ‚îÄ‚îÄ */
  .chat-panel {
    width: 340px; border-right: 1px solid var(--border);
    display: flex; flex-direction: column;
    background: var(--surface);
  }
  .center-panel {
    flex: 1; display: flex; flex-direction: column;
    position: relative;
  }

  /* Context strip */
  .context-strip {
    display: flex; align-items: center; gap: 10px;
    padding: 8px 16px; border-bottom: 1px solid var(--border);
    background: rgba(11,13,16,1);
    font-size: 11px;
  }
  .market-badge {
    font-size: 9px; font-weight: 600; padding: 2px 8px;
    border-radius: 4px; border: 1px solid;
  }
  .badge-open { background: var(--emerald-dim); color: var(--emerald); border-color: var(--emerald-ring); }
  .badge-pre { background: var(--amber-dim); color: var(--amber); border-color: rgba(245,158,11,0.3); }
  .divider-v { width: 1px; height: 16px; background: var(--border); }
  .setup-chip {
    display: flex; align-items: center; gap: 6px;
    padding: 4px 10px; border-radius: 6px;
    border: 1px solid var(--border); background: rgba(255,255,255,0.03);
    font-size: 10px; color: var(--text-dim); cursor: pointer;
  }
  .setup-chip:hover { border-color: var(--emerald-ring); color: var(--text); }
  .setup-score {
    font-size: 9px; padding: 1px 5px; border-radius: 3px;
    background: var(--emerald-dim); color: var(--emerald);
  }

  /* Tab rail */
  .tab-rail {
    display: flex; align-items: center; gap: 2px;
    padding: 6px 12px; border-bottom: 1px solid var(--border);
    overflow-x: auto; position: relative;
    scrollbar-width: none;
  }
  .tab-rail::-webkit-scrollbar { display: none; }
  .tab-group-label {
    font-size: 8px; text-transform: uppercase; letter-spacing: 0.08em;
    color: var(--text-faint); padding: 0 6px; white-space: nowrap;
  }
  .tab-group-divider { width: 1px; height: 20px; background: var(--border); margin: 0 4px; }
  .tab-btn {
    padding: 5px 10px; border-radius: 6px;
    font-size: 11px; color: var(--text-dim);
    white-space: nowrap; cursor: pointer; transition: all 0.15s;
  }
  .tab-btn:hover { background: rgba(255,255,255,0.03); color: var(--text); }
  .tab-btn.active { background: var(--emerald-dim); color: var(--emerald); }

  /* Pulse ring animation */
  @keyframes pulseRing {
    0% { box-shadow: 0 0 0 0 rgba(16,185,129,0.4); }
    70% { box-shadow: 0 0 0 6px rgba(16,185,129,0); }
    100% { box-shadow: 0 0 0 0 rgba(16,185,129,0); }
  }
  .pulse-active {
    animation: pulseRing 1.2s ease-out;
    outline: 1px solid var(--emerald-ring);
    border-radius: 8px;
  }

  /* Pulse toast */
  .pulse-toast {
    position: absolute; top: 8px; right: 12px; z-index: 30;
    padding: 4px 10px; border-radius: 6px;
    background: var(--emerald-dim); border: 1px solid var(--emerald-ring);
    font-size: 10px; color: #6EE7B7;
    animation: fadeInDown 0.3s ease;
  }
  @keyframes fadeInDown {
    from { opacity: 0; transform: translateY(-6px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* Mini-chat overlay */
  .mini-chat-overlay {
    position: absolute; bottom: 12px; left: 12px; z-index: 40;
    width: 300px; height: 380px;
    border-radius: 16px; overflow: hidden;
    background: rgba(13,15,19,0.95);
    backdrop-filter: blur(20px);
    border: 1px solid var(--border-light);
    box-shadow: 0 16px 60px rgba(0,0,0,0.4);
    display: flex; flex-direction: column;
  }
  .mini-chat-header {
    display: flex; align-items: center; justify-content: space-between;
    padding: 8px 12px; border-bottom: 1px solid var(--border);
  }
  .mini-chat-messages {
    flex: 1; overflow-y: auto; padding: 8px 10px;
    display: flex; flex-direction: column; gap: 6px;
  }
  .mini-msg {
    font-size: 11px; line-height: 1.4;
    padding: 6px 10px; border-radius: 10px;
    max-width: 85%;
  }
  .mini-msg-user {
    align-self: flex-end;
    background: var(--emerald-dim); border: 1px solid rgba(16,185,129,0.2);
    color: rgba(255,255,255,0.8);
  }
  .mini-msg-ai {
    align-self: flex-start;
    background: rgba(255,255,255,0.04); border: 1px solid var(--border);
    color: rgba(255,255,255,0.7);
  }
  .mini-chat-input {
    display: flex; align-items: center; gap: 6px;
    padding: 8px 10px; border-top: 1px solid var(--border);
  }
  .mini-chat-input input {
    flex: 1; background: rgba(255,255,255,0.04);
    border: 1px solid var(--border); border-radius: 8px;
    padding: 6px 10px; font-size: 11px; color: white;
    outline: none;
  }
  .mini-send {
    width: 24px; height: 24px; border-radius: 6px;
    background: var(--emerald); display: flex;
    align-items: center; justify-content: center;
    cursor: pointer;
  }

  /* Hover coordination highlight */
  .hover-highlight {
    outline: 1px solid var(--emerald-ring) !important;
    background: rgba(16,185,129,0.06) !important;
    transition: all 0.2s;
  }

  /* ‚îÄ‚îÄ‚îÄ Annotation Callout ‚îÄ‚îÄ‚îÄ */
  .callout {
    position: absolute; padding: 6px 10px;
    background: rgba(16,185,129,0.12);
    border: 1px solid var(--emerald-ring);
    border-radius: 8px; font-size: 10px;
    color: var(--emerald); white-space: nowrap;
    pointer-events: none; z-index: 50;
  }
  .callout::before {
    content: ''; position: absolute;
    width: 0; height: 0;
  }
  .callout-left::before {
    left: -6px; top: 50%; transform: translateY(-50%);
    border-right: 6px solid var(--emerald-ring);
    border-top: 5px solid transparent;
    border-bottom: 5px solid transparent;
  }
  .callout-right::before {
    right: -6px; top: 50%; transform: translateY(-50%);
    border-left: 6px solid var(--emerald-ring);
    border-top: 5px solid transparent;
    border-bottom: 5px solid transparent;
  }
  .callout-bottom::before {
    bottom: -6px; left: 50%; transform: translateX(-50%);
    border-top: 6px solid var(--emerald-ring);
    border-left: 5px solid transparent;
    border-right: 5px solid transparent;
  }

  /* Toggle interaction */
  .toggle-bar {
    display: flex; gap: 4px; padding: 4px; margin: 8px 16px;
    background: rgba(255,255,255,0.04); border: 1px solid var(--border);
    border-radius: 10px;
  }
  .toggle-btn {
    flex: 1; padding: 8px; text-align: center;
    border-radius: 8px; font-size: 13px; font-weight: 500;
    color: var(--text-dim); cursor: pointer;
  }
  .toggle-btn.active { background: var(--emerald-dim); color: var(--emerald); }

  /* Dead-end indicator */
  .dead-end {
    position: relative;
  }
  .dead-end::after {
    content: '‚úï DEAD'; position: absolute; top: -4px; right: -4px;
    font-size: 7px; font-weight: 700; color: var(--red);
    background: var(--red-dim); padding: 1px 4px; border-radius: 3px;
    border: 1px solid rgba(239,68,68,0.3);
  }

  /* ‚îÄ‚îÄ‚îÄ Annotations ‚îÄ‚îÄ‚îÄ */
  .annotation-box {
    margin-top: 20px; padding: 16px;
    background: rgba(255,255,255,0.02);
    border: 1px solid var(--border);
    border-radius: 12px;
  }
  .annotation-box h4 {
    font-size: 12px; font-weight: 600; color: var(--emerald);
    margin-bottom: 10px;
  }
  .annotation-list {
    list-style: none; display: flex; flex-direction: column; gap: 6px;
  }
  .annotation-list li {
    font-size: 12px; color: var(--text-dim); line-height: 1.5;
    padding-left: 16px; position: relative;
  }
  .annotation-list li::before {
    content: '‚Üí'; position: absolute; left: 0; color: var(--emerald);
  }

  /* Section divider */
  .section-divider {
    text-align: center; padding: 32px 0 16px;
    font-size: 10px; font-weight: 700;
    text-transform: uppercase; letter-spacing: 0.15em;
    color: var(--text-faint);
  }

  /* Responsive */
  @media (max-width: 480px) {
    .phone-frame { width: 100%; border-radius: 0; border: none; height: 700px; }
  }

  /* Toggle visibility for interactive sheets */
  .sheet-hidden { display: none !important; }

  /* Simple collapsed state */
  .collapsed-btn {
    position: absolute; bottom: 12px; left: 12px; z-index: 10;
    display: flex; align-items: center; gap: 8px;
    padding: 10px 16px; border-radius: 24px;
    background: rgba(15,16,19,0.95); backdrop-filter: blur(16px);
    border: 1px solid var(--emerald-ring);
    box-shadow: 0 8px 30px rgba(16,185,129,0.2);
    cursor: pointer; font-size: 12px; color: rgba(255,255,255,0.7);
  }

  /* Minimized bubble */
  .mini-bubble {
    position: absolute; bottom: 12px; left: 12px; z-index: 40;
    display: flex; align-items: center; gap: 8px;
    padding: 8px 14px; border-radius: 24px;
    background: rgba(15,16,19,0.95); backdrop-filter: blur(16px);
    border: 1px solid var(--emerald-ring);
    box-shadow: 0 8px 30px rgba(16,185,129,0.2);
    cursor: pointer; font-size: 11px; color: rgba(255,255,255,0.7);
  }
</style>
</head>
<body>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê TOP BAR ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="top-bar">
  <div>
    <h1>TITM AI Coach ‚Äî <span>Interactive Wireframes</span></h1>
    <div class="subtitle">Path B: Chat-First Luxury Rearchitecture ¬∑ 7 Key Phases</div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê PHASE TABS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="phase-tabs" id="phaseTabs">
  <button class="phase-tab active" data-phase="before"><span class="tag tag-mobile">NOW</span>Current State</button>
  <button class="phase-tab" data-phase="p2"><span class="tag tag-mobile">M</span>Inline Charts</button>
  <button class="phase-tab" data-phase="p3"><span class="tag tag-mobile">M</span>Tool Sheets</button>
  <button class="phase-tab" data-phase="p5"><span class="tag tag-mobile">M</span>Quick-Access Bar</button>
  <button class="phase-tab" data-phase="p8"><span class="tag tag-desktop">D</span>Feedback Pulse</button>
  <button class="phase-tab" data-phase="p10"><span class="tag tag-desktop">D</span>Context Strip</button>
  <button class="phase-tab" data-phase="p11"><span class="tag tag-desktop">D</span>Mini-Chat Overlay</button>
  <button class="phase-tab" data-phase="p13"><span class="tag tag-desktop">D</span>Hover Coordination</button>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<!-- CURRENT STATE (BEFORE)                                                                     -->
<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="phase-content active" id="phase-before">
  <div class="phase-header">
    <h2>Current State ‚Äî The Three Layers Problem</h2>
    <p>Three competing navigation systems (binary toggle, 12-tab rail, floating Tools FAB) expose the same destinations through different entry points. Widget actions are dead on mobile because CenterPanel unmounts when chat is showing.</p>
  </div>

  <div style="display:flex;gap:32px;flex-wrap:wrap;justify-content:center">
    <!-- MOBILE BEFORE -->
    <div>
      <div class="wireframe-label label-before">MOBILE ‚Äî CURRENT</div>
      <div class="phone-frame">
        <div class="phone-notch"></div>
        <div class="phone-screen">
          <div class="nav-header">
            <div class="title">AI Coach</div>
            <div style="font-size:11px;color:var(--text-dim)">Session 1</div>
          </div>

          <!-- Problem: Binary Toggle -->
          <div class="toggle-bar" style="position:relative">
            <div class="toggle-btn active">üí¨ Chat</div>
            <div class="toggle-btn">üìä Chart</div>
            <div class="callout callout-bottom" style="top:-38px;left:50%;transform:translateX(-50%);font-size:9px">
              Binary toggle unmounts inactive view
            </div>
          </div>

          <!-- Chat with dead widget -->
          <div class="chat-area" style="flex:1">
            <div class="chat-bubble bubble-user">What are the key levels for AAPL?</div>
            <div class="chat-bubble bubble-ai">
              AAPL is trading at $189.45. Here are the key levels:
              <div class="widget-card">
                <div class="wc-header">
                  <span class="wc-symbol">AAPL</span>
                  <span class="wc-badge">Key Levels</span>
                </div>
                <div class="wc-levels">
                  <span>R1: $192.50</span>
                  <span>PP: $189.00</span>
                  <span>S1: $186.20</span>
                </div>
                <div class="wc-actions">
                  <button class="wc-btn wc-btn-primary dead-end">üìà Show on Chart</button>
                  <button class="wc-btn dead-end">‚öôÔ∏è Options</button>
                  <button class="wc-btn dead-end">üîî Alert</button>
                </div>
              </div>
            </div>
            <div style="font-size:10px;color:var(--red);text-align:center;padding:8px">
              ‚ö†Ô∏è Widget buttons dispatch events but CenterPanel is unmounted ‚Üí nothing happens
            </div>
          </div>

          <div class="chat-input-area">
            <div class="chat-input">
              <span class="chat-input-text">Ask your AI Coach...</span>
              <div class="send-btn"><svg viewBox="0 0 24 24"><path d="M2 21l21-9L2 3v7l15 2-15 2v7z"/></svg></div>
            </div>
          </div>

          <div class="bottom-nav">
            <div class="bnav-item"><span>üè†</span>Home</div>
            <div class="bnav-item"><span>üìö</span>Academy</div>
            <div class="bnav-item active"><div class="bnav-dot"></div><span>ü§ñ</span>AI Coach</div>
            <div class="bnav-item"><span>üìä</span>Dashboard</div>
            <div class="bnav-item"><span>üë§</span>Profile</div>
          </div>
        </div>
      </div>
    </div>

    <!-- DESKTOP BEFORE -->
    <div style="flex:1;min-width:500px">
      <div class="wireframe-label label-before">DESKTOP ‚Äî CURRENT</div>
      <div class="desktop-frame">
        <div class="desktop-titlebar">
          <div class="dot dot-r"></div><div class="dot dot-y"></div><div class="dot dot-g"></div>
          <span style="margin-left:8px;font-size:11px;color:var(--text-dim)">TradeITM ‚Äî AI Coach</span>
        </div>
        <div class="desktop-screen">
          <!-- Chat Panel -->
          <div class="chat-panel">
            <div class="nav-header" style="padding:10px 12px">
              <div style="font-size:13px;font-weight:600">AI Coach</div>
            </div>
            <div class="chat-area" style="flex:1;padding:10px">
              <div class="chat-bubble bubble-user" style="font-size:12px">Show me AAPL key levels</div>
              <div class="chat-bubble bubble-ai" style="font-size:12px">
                Here are AAPL's key levels:
                <div class="widget-card" style="font-size:10px">
                  <div class="wc-header">
                    <span class="wc-symbol" style="font-size:11px">AAPL</span>
                    <span class="wc-badge">Key Levels</span>
                  </div>
                  <div class="wc-actions" style="margin-top:6px">
                    <button class="wc-btn wc-btn-primary" style="font-size:9px">Show on Chart</button>
                    <button class="wc-btn" style="font-size:9px">Options</button>
                  </div>
                </div>
              </div>
            </div>
            <div class="chat-input-area" style="padding:8px">
              <div class="chat-input" style="padding:8px 10px">
                <span class="chat-input-text" style="font-size:12px">Ask anything...</span>
              </div>
            </div>
          </div>
          <!-- Center Panel -->
          <div class="center-panel">
            <!-- NO context strip currently -->
            <div style="padding:16px;text-align:center;flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center">
              <div style="font-size:28px;margin-bottom:8px">üëã</div>
              <div style="font-size:16px;font-weight:600;margin-bottom:4px">Welcome to AI Coach</div>
              <div style="font-size:12px;color:var(--text-dim);margin-bottom:16px">Default view is Welcome ‚Äî user must navigate to chart</div>
              <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;width:80%">
                <div style="padding:12px;background:rgba(255,255,255,0.03);border:1px solid var(--border);border-radius:8px;font-size:11px;color:var(--text-dim)">üìà SPX Ticker (duplicated from chat)</div>
                <div style="padding:12px;background:rgba(255,255,255,0.03);border:1px solid var(--border);border-radius:8px;font-size:11px;color:var(--text-dim)">üéØ Next Best Setup</div>
                <div style="padding:12px;background:rgba(255,255,255,0.03);border:1px solid var(--border);border-radius:8px;font-size:11px;color:var(--text-dim)">Quick Prompt Card</div>
                <div style="padding:12px;background:rgba(255,255,255,0.03);border:1px solid var(--border);border-radius:8px;font-size:11px;color:var(--text-dim)">Quick Prompt Card</div>
              </div>
            </div>
            <!-- Tab rail with hover-only labels -->
            <div class="tab-rail">
              <div class="tab-group-label" style="opacity:0.3">Analyze</div>
              <div class="tab-btn">Chart</div><div class="tab-btn">Options</div><div class="tab-btn">Position</div>
              <div class="tab-group-divider"></div>
              <div class="tab-group-label" style="opacity:0.3">Portfolio</div>
              <div class="tab-btn">Journal</div><div class="tab-btn">Tracked</div>
              <div class="tab-group-divider"></div>
              <div class="tab-group-label" style="opacity:0.3">Monitor</div>
              <div class="tab-btn">Alerts</div><div class="tab-btn">Scanner</div>
            </div>
            <div style="position:absolute;bottom:8px;right:12px;font-size:10px;color:var(--text-faint)">
              Group labels only visible on hover ‚Üí
            </div>
          </div>
        </div>
      </div>
      <div class="annotation-box">
        <h4>Problems Visible Here</h4>
        <ul class="annotation-list">
          <li>Mobile: Binary toggle unmounts CenterPanel, killing all widget actions</li>
          <li>Mobile: "Show on Chart" button is dead ‚Äî nothing happens when tapped</li>
          <li>Desktop: Welcome is the default view, not Chart ‚Äî wastes a click</li>
          <li>Desktop: SPX ticker duplicated in Welcome and could be a persistent strip</li>
          <li>Desktop: Tab group labels invisible until hover ‚Äî users don't discover groups</li>
          <li>Desktop: No feedback when widget action fires ‚Äî user doesn't know CenterPanel changed</li>
          <li>Desktop: Collapsing chat shows a static button, not a useful mini-chat</li>
        </ul>
      </div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<!-- PHASE 2: INLINE CHART CARDS                                                                -->
<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="phase-content" id="phase-p2">
  <div class="phase-header">
    <h2>Phase 2 ‚Äî Inline Chart Cards in Chat</h2>
    <p>When the AI returns chart data, a 200px mini TradingChart renders inline within the chat bubble. Tapping it opens the full chart sheet. No more silent CenterPanel switching.</p>
  </div>

  <div style="display:flex;gap:32px;flex-wrap:wrap;justify-content:center">
    <div>
      <div class="wireframe-label label-after">MOBILE ‚Äî INLINE CHART CARD</div>
      <div class="phone-frame">
        <div class="phone-notch"></div>
        <div class="phone-screen">
          <div class="nav-header">
            <div class="title">AI Coach</div>
          </div>

          <div class="chat-area" style="flex:1">
            <div class="chat-bubble bubble-user">Show me AAPL with key levels</div>
            <div class="chat-bubble bubble-ai">
              <div style="margin-bottom:6px">AAPL is at $189.45. Here's the chart with key levels:</div>

              <!-- NEW: Inline mini chart -->
              <div class="inline-chart">
                <div class="inline-chart-header">
                  <div>
                    <span style="color:var(--emerald);margin-right:4px">üìà</span>
                    <span class="symbol">AAPL</span>
                    <span class="tf">15min</span>
                  </div>
                  <span class="expand">‚§¢ Expand</span>
                </div>
                <div class="chart-canvas">
                  <svg viewBox="0 0 340 160" style="position:absolute;left:0;right:0;top:0;bottom:0;width:100%;height:100%">
                    <!-- Simplified candlestick chart representation -->
                    <path d="M10,130 L30,125 L50,115 L70,120 L90,105 L110,95 L130,100 L150,85 L170,80 L190,75 L210,65 L230,70 L250,60 L270,55 L290,50 L310,45 L330,40" stroke="var(--emerald)" fill="none" stroke-width="2"/>
                    <path d="M10,130 L30,125 L50,115 L70,120 L90,105 L110,95 L130,100 L150,85 L170,80 L190,75 L210,65 L230,70 L250,60 L270,55 L290,50 L310,45 L330,40 L340,40 L340,160 L0,160 Z" fill="url(#chartGrad)" opacity="0.15"/>
                    <defs><linearGradient id="chartGrad" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="var(--emerald)"/><stop offset="100%" stop-color="transparent"/></linearGradient></defs>
                    <!-- Key level lines -->
                    <line x1="0" y1="35" x2="340" y2="35" stroke="#ef4444" stroke-width="1" stroke-dasharray="4,3" opacity="0.6"/>
                    <text x="4" y="32" fill="#ef4444" font-size="8" opacity="0.7">R1 $192.50</text>
                    <line x1="0" y1="80" x2="340" y2="80" stroke="#f3e5ab" stroke-width="1" stroke-dasharray="4,3" opacity="0.6"/>
                    <text x="4" y="77" fill="#f3e5ab" font-size="8" opacity="0.7">PP $189.00</text>
                    <line x1="0" y1="130" x2="340" y2="130" stroke="var(--emerald)" stroke-width="1" stroke-dasharray="4,3" opacity="0.6"/>
                    <text x="4" y="127" fill="var(--emerald)" font-size="8" opacity="0.7">S1 $186.20</text>
                  </svg>
                </div>
              </div>

              <div class="widget-card" style="margin-top:6px">
                <div class="wc-actions">
                  <button class="wc-btn wc-btn-primary">üìà Full Chart</button>
                  <button class="wc-btn">‚öôÔ∏è Options</button>
                  <button class="wc-btn">üîî Alert</button>
                </div>
              </div>
            </div>
          </div>

          <div class="chat-input-area">
            <div class="chat-input">
              <span class="chat-input-text">Ask your AI Coach...</span>
              <div class="send-btn"><svg viewBox="0 0 24 24"><path d="M2 21l21-9L2 3v7l15 2-15 2v7z"/></svg></div>
            </div>
          </div>

          <div class="bottom-nav">
            <div class="bnav-item"><span>üè†</span>Home</div>
            <div class="bnav-item"><span>üìö</span>Academy</div>
            <div class="bnav-item active"><div class="bnav-dot"></div><span>ü§ñ</span>AI Coach</div>
            <div class="bnav-item"><span>üìä</span>Dashboard</div>
            <div class="bnav-item"><span>üë§</span>Profile</div>
          </div>
        </div>
      </div>
    </div>

    <div style="flex:1;min-width:300px">
      <div class="annotation-box" style="margin-top:0">
        <h4>What Changed</h4>
        <ul class="annotation-list">
          <li>200px interactive TradingChart renders inside the chat bubble</li>
          <li>Key levels (R1, PP, S1) drawn directly on the mini chart</li>
          <li>Chart header shows symbol + timeframe + expand icon</li>
          <li>Tap/click the chart card to open full-screen sheet (Phase 3)</li>
          <li>Widget buttons still present below for other actions</li>
          <li>Chart data is attached per-message, not global ‚Äî each response gets its own chart</li>
          <li>Uses dynamic import ‚Äî chart library only loads when a chart message appears</li>
        </ul>
      </div>
      <div class="annotation-box">
        <h4>Before vs After</h4>
        <ul class="annotation-list">
          <li><strong style="color:var(--red)">Before:</strong> AI says "showing chart" but silently switches CenterPanel (unmounted = nothing)</li>
          <li><strong style="color:var(--emerald)">After:</strong> Chart appears right in the conversation, visually embedded in the AI's response</li>
        </ul>
      </div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<!-- PHASE 3: FULL-SCREEN TOOL SHEETS                                                           -->
<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="phase-content" id="phase-p3">
  <div class="phase-header">
    <h2>Phase 3 ‚Äî Full-Screen Tool Sheets</h2>
    <p>Tools open as full-screen sheets that slide up over chat. Chat never unmounts ‚Äî when you close the sheet, your conversation is exactly where you left it.</p>
  </div>

  <div style="display:flex;gap:32px;flex-wrap:wrap;justify-content:center">
    <!-- Chat state (sheet closed) -->
    <div>
      <div class="wireframe-label label-after">CHAT STATE (ALWAYS MOUNTED)</div>
      <div class="phone-frame" id="sheetDemo" style="cursor:pointer" onclick="toggleSheet()">
        <div class="phone-notch"></div>
        <div class="phone-screen" style="position:relative">
          <div class="nav-header">
            <div class="title">AI Coach</div>
          </div>

          <div class="chat-area" style="flex:1">
            <div class="chat-bubble bubble-user">AAPL key levels</div>
            <div class="chat-bubble bubble-ai">
              Here are the key levels:
              <div class="widget-card">
                <div class="wc-header">
                  <span class="wc-symbol">AAPL</span>
                  <span class="wc-badge">Key Levels</span>
                </div>
                <div class="wc-actions">
                  <button class="wc-btn wc-btn-primary" onclick="event.stopPropagation();toggleSheet()">üìà Show on Chart</button>
                  <button class="wc-btn">‚öôÔ∏è Options</button>
                </div>
              </div>
            </div>
            <div class="chat-bubble bubble-user">What about the GEX profile?</div>
            <div class="chat-bubble bubble-ai">The GEX shows a large positive gamma wall at $190...</div>
          </div>

          <div class="chat-input-area">
            <div class="chat-input">
              <span class="chat-input-text">Ask your AI Coach...</span>
              <div class="send-btn"><svg viewBox="0 0 24 24"><path d="M2 21l21-9L2 3v7l15 2-15 2v7z"/></svg></div>
            </div>
          </div>

          <div class="bottom-nav">
            <div class="bnav-item active"><div class="bnav-dot"></div><span>ü§ñ</span>AI Coach</div>
            <div class="bnav-item"><span>üìä</span>Dash</div>
          </div>

          <!-- TOOL SHEET (toggleable) -->
          <div class="tool-sheet-overlay sheet-hidden" id="toolSheet">
            <div class="sheet-header">
              <h3>Live Chart</h3>
              <button class="sheet-close" onclick="event.stopPropagation();toggleSheet()">‚ñæ Close</button>
            </div>
            <div class="sheet-body">
              <div class="full-chart-area">
                <div class="chart-toolbar">
                  <button class="chart-toolbar-btn">AAPL</button>
                  <button class="chart-toolbar-btn active">15m</button>
                  <button class="chart-toolbar-btn">1H</button>
                  <button class="chart-toolbar-btn">1D</button>
                  <span style="flex:1"></span>
                  <button class="chart-toolbar-btn">üìè Levels</button>
                  <button class="chart-toolbar-btn">üìê Fibonacci</button>
                </div>
                <div style="flex:1;padding:16px;position:relative">
                  <svg viewBox="0 0 400 300" style="width:100%;height:100%">
                    <path d="M10,260 L40,250 L70,230 L100,240 L130,210 L160,190 L190,200 L220,170 L250,160 L280,140 L310,120 L340,130 L370,100 L400,80" stroke="var(--emerald)" fill="none" stroke-width="2.5"/>
                    <path d="M10,260 L40,250 L70,230 L100,240 L130,210 L160,190 L190,200 L220,170 L250,160 L280,140 L310,120 L340,130 L370,100 L400,80 L400,300 L0,300 Z" fill="url(#chartGrad2)" opacity="0.1"/>
                    <defs><linearGradient id="chartGrad2" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="var(--emerald)"/><stop offset="100%" stop-color="transparent"/></linearGradient></defs>
                    <line x1="0" y1="60" x2="400" y2="60" stroke="#ef4444" stroke-dasharray="4,3" opacity="0.5"/>
                    <text x="4" y="56" fill="#ef4444" font-size="9">R1 $192.50</text>
                    <line x1="0" y1="150" x2="400" y2="150" stroke="#f3e5ab" stroke-dasharray="4,3" opacity="0.5"/>
                    <text x="4" y="146" fill="#f3e5ab" font-size="9">PP $189.00</text>
                    <line x1="0" y1="250" x2="400" y2="250" stroke="var(--emerald)" stroke-dasharray="4,3" opacity="0.5"/>
                    <text x="4" y="246" fill="var(--emerald)" font-size="9">S1 $186.20</text>
                  </svg>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div style="text-align:center;margin-top:8px;font-size:11px;color:var(--text-dim)">
        üëÜ Click "Show on Chart" or anywhere to toggle the sheet
      </div>
    </div>

    <div style="flex:1;min-width:300px">
      <div class="annotation-box" style="margin-top:0">
        <h4>Key Design Decisions</h4>
        <ul class="annotation-list">
          <li>Sheet slides up from bottom with spring animation (damping: 25, stiffness: 300)</li>
          <li>Chat remains mounted underneath ‚Äî close sheet, conversation is intact</li>
          <li>Sheet header shows tool name + Close button</li>
          <li>Close via: button, Escape key, or swipe down (100px+ threshold)</li>
          <li>Focus trapped inside sheet (Tab cycles within)</li>
          <li>CenterPanel renders inside sheet with forcedView prop</li>
          <li>Sheet is <code>lg:hidden</code> ‚Äî desktop uses the side panel as before</li>
        </ul>
      </div>
      <div class="annotation-box">
        <h4>Sheet Types Available</h4>
        <ul class="annotation-list">
          <li><strong>Chart</strong> ‚Äî Full TradingChart with toolbar, levels, drawing tools</li>
          <li><strong>Options Chain</strong> ‚Äî Full options table with Greeks</li>
          <li><strong>Position Analyzer</strong> ‚Äî P&L curves, risk metrics</li>
          <li><strong>Scanner</strong> ‚Äî Opportunity scanner with filters</li>
          <li><strong>Journal</strong> ‚Äî Trade journal entries</li>
          <li><strong>Alerts</strong> ‚Äî Price alert manager</li>
          <li><strong>Morning Brief</strong> ‚Äî Daily market brief</li>
          <li><strong>+ 7 more</strong> ‚Äî LEAPS, Earnings, Macro, Watchlist, etc.</li>
        </ul>
      </div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<!-- PHASE 5: QUICK-ACCESS BAR                                                                  -->
<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="phase-content" id="phase-p5">
  <div class="phase-header">
    <h2>Phase 5 ‚Äî Quick-Access Bar</h2>
    <p>A slim icon bar sits above the chat input, replacing the toggle, tab rail, and Tools FAB with a single navigation layer. Five primary tools + a "More" button that expands a categorized grid.</p>
  </div>

  <div style="display:flex;gap:32px;flex-wrap:wrap;justify-content:center">
    <div>
      <div class="wireframe-label label-after">MOBILE ‚Äî CHAT-FIRST WITH QUICK-ACCESS</div>
      <div class="phone-frame" id="qaDemo">
        <div class="phone-notch"></div>
        <div class="phone-screen" style="position:relative">
          <div class="nav-header">
            <div class="title">AI Coach</div>
          </div>

          <div class="chat-area" style="flex:1">
            <div class="chat-bubble bubble-user">Morning brief for today</div>
            <div class="chat-bubble bubble-ai">
              Good morning! Here's your daily brief:
              <div style="margin-top:6px;padding:8px;border-radius:8px;background:rgba(255,255,255,0.03);border:1px solid var(--border);font-size:11px">
                <div style="color:var(--emerald);font-weight:600;margin-bottom:4px">Market Brief ‚Äî Feb 14, 2026</div>
                <div style="color:var(--text-dim);line-height:1.5">SPX +0.24% pre-market. Key events: CPI 8:30am, FOMC minutes 2pm. GEX shows positive gamma above 5140...</div>
              </div>
            </div>
            <div class="chat-bubble bubble-user">What's the NVDA setup looking like?</div>
            <div class="chat-bubble bubble-ai">
              NVDA has a high-confidence long setup:
              <div class="inline-chart">
                <div class="inline-chart-header">
                  <div><span style="color:var(--emerald);margin-right:4px">üìà</span><span class="symbol">NVDA</span><span class="tf">15min</span></div>
                  <span class="expand">‚§¢</span>
                </div>
                <div class="chart-canvas" style="height:140px">
                  <svg viewBox="0 0 340 120" style="position:absolute;inset:0;width:100%;height:100%">
                    <path d="M10,100 L50,90 L90,85 L130,70 L170,65 L210,55 L250,45 L290,40 L330,30" stroke="var(--emerald)" fill="none" stroke-width="2"/>
                  </svg>
                </div>
              </div>
            </div>
          </div>

          <!-- QUICK ACCESS BAR ‚Äî THE KEY NEW ELEMENT -->
          <div class="quick-access-bar" style="position:relative">
            <div class="qa-btn" onclick="toggleSheet2('chart')">
              <div class="qa-icon">üìà</div>
              <span>Chart</span>
              <!-- Active chart dot -->
              <div style="position:absolute;top:4px;right:calc(50% - 12px);width:5px;height:5px;border-radius:50%;background:var(--emerald)"></div>
            </div>
            <div class="qa-btn" onclick="toggleSheet2('options')">
              <div class="qa-icon">‚öôÔ∏è</div>
              <span>Options</span>
            </div>
            <div class="qa-btn" onclick="toggleSheet2('scanner')">
              <div class="qa-icon">üîç</div>
              <span>Scanner</span>
            </div>
            <div class="qa-btn" onclick="toggleSheet2('brief')">
              <div class="qa-icon">üåÖ</div>
              <span>Brief</span>
            </div>
            <div class="qa-btn" onclick="toggleSheet2('journal')">
              <div class="qa-icon">üìì</div>
              <span>Journal</span>
            </div>
            <div class="qa-btn" onclick="toggleMorePanel()">
              <div class="qa-icon">‚äû</div>
              <span>More</span>
            </div>
          </div>

          <!-- More tools panel (hidden by default) -->
          <div id="morePanel" style="display:none;padding:12px 16px;border-top:1px solid var(--border);background:var(--surface-2);max-height:200px;overflow-y:auto">
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px">
              <div>
                <div style="font-size:9px;text-transform:uppercase;letter-spacing:0.1em;color:var(--text-faint);margin-bottom:6px">Analyze</div>
                <div style="display:flex;flex-direction:column;gap:4px">
                  <div style="font-size:11px;color:var(--text-dim);padding:4px 8px;border-radius:6px;background:rgba(255,255,255,0.03)">üìà Chart</div>
                  <div style="font-size:11px;color:var(--text-dim);padding:4px 8px;border-radius:6px;background:rgba(255,255,255,0.03)">‚öôÔ∏è Options</div>
                  <div style="font-size:11px;color:var(--text-dim);padding:4px 8px;border-radius:6px;background:rgba(255,255,255,0.03)">üìä Position</div>
                </div>
              </div>
              <div>
                <div style="font-size:9px;text-transform:uppercase;letter-spacing:0.1em;color:var(--text-faint);margin-bottom:6px">Portfolio</div>
                <div style="display:flex;flex-direction:column;gap:4px">
                  <div style="font-size:11px;color:var(--text-dim);padding:4px 8px;border-radius:6px;background:rgba(255,255,255,0.03)">üìì Journal</div>
                  <div style="font-size:11px;color:var(--text-dim);padding:4px 8px;border-radius:6px;background:rgba(255,255,255,0.03)">üìå Tracked</div>
                  <div style="font-size:11px;color:var(--text-dim);padding:4px 8px;border-radius:6px;background:rgba(255,255,255,0.03)">üì∑ Screenshot</div>
                </div>
              </div>
              <div>
                <div style="font-size:9px;text-transform:uppercase;letter-spacing:0.1em;color:var(--text-faint);margin-bottom:6px">Monitor</div>
                <div style="display:flex;flex-direction:column;gap:4px">
                  <div style="font-size:11px;color:var(--text-dim);padding:4px 8px;border-radius:6px;background:rgba(255,255,255,0.03)">üîî Alerts</div>
                  <div style="font-size:11px;color:var(--text-dim);padding:4px 8px;border-radius:6px;background:rgba(255,255,255,0.03)">üîç Scanner</div>
                </div>
              </div>
              <div>
                <div style="font-size:9px;text-transform:uppercase;letter-spacing:0.1em;color:var(--text-faint);margin-bottom:6px">Research</div>
                <div style="display:flex;flex-direction:column;gap:4px">
                  <div style="font-size:11px;color:var(--text-dim);padding:4px 8px;border-radius:6px;background:rgba(255,255,255,0.03)">üåÖ Brief</div>
                  <div style="font-size:11px;color:var(--text-dim);padding:4px 8px;border-radius:6px;background:rgba(255,255,255,0.03)">ü¶ò LEAPS</div>
                  <div style="font-size:11px;color:var(--text-dim);padding:4px 8px;border-radius:6px;background:rgba(255,255,255,0.03)">üìÖ Earnings</div>
                </div>
              </div>
            </div>
          </div>

          <div class="chat-input-area">
            <div class="chat-input">
              <span class="chat-input-text">Ask your AI Coach...</span>
              <div class="send-btn"><svg viewBox="0 0 24 24"><path d="M2 21l21-9L2 3v7l15 2-15 2v7z"/></svg></div>
            </div>
          </div>

          <div class="bottom-nav">
            <div class="bnav-item"><span>üè†</span>Home</div>
            <div class="bnav-item active"><div class="bnav-dot"></div><span>ü§ñ</span>Coach</div>
            <div class="bnav-item"><span>üìä</span>Dash</div>
          </div>
        </div>
      </div>
      <div style="text-align:center;margin-top:8px;font-size:11px;color:var(--text-dim)">
        üëÜ Click "More" to expand the categorized tool grid
      </div>
    </div>

    <div style="flex:1;min-width:300px">
      <div class="annotation-box" style="margin-top:0">
        <h4>What Replaced What</h4>
        <ul class="annotation-list">
          <li><strong style="color:var(--red)">Killed:</strong> Binary Chat/Chart toggle bar</li>
          <li><strong style="color:var(--red)">Killed:</strong> 12-tab rail on mobile (only in CenterPanel)</li>
          <li><strong style="color:var(--red)">Killed:</strong> Floating Tools FAB button</li>
          <li><strong style="color:var(--red)">Killed:</strong> Welcome view as default on mobile</li>
          <li><strong style="color:var(--emerald)">Added:</strong> 5 primary tool icons + More (one navigation layer)</li>
          <li><strong style="color:var(--emerald)">Added:</strong> Categorized "More" grid (Analyze, Portfolio, Monitor, Research)</li>
          <li><strong style="color:var(--emerald)">Added:</strong> Active chart dot indicator (green dot when chart has data)</li>
        </ul>
      </div>
      <div class="annotation-box">
        <h4>Design Details</h4>
        <ul class="annotation-list">
          <li>5 primary tools chosen by usage frequency: Chart, Options, Scanner, Brief, Journal</li>
          <li>"More" expands a categorized 2-column grid with all 13 tools</li>
          <li>Selecting a tool from "More" opens its sheet AND collapses the grid</li>
          <li>Green dot on Chart button when AI has loaded chart data ‚Üí teaches users to tap</li>
          <li>Bar sits between chat messages and input ‚Äî always accessible, never blocking</li>
        </ul>
      </div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<!-- PHASE 8: FEEDBACK PULSE                                                                    -->
<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="phase-content" id="phase-p8">
  <div class="phase-header">
    <h2>Phase 8 ‚Äî Widget Action Feedback Pulse</h2>
    <p>When a widget action fires (e.g., "Show on Chart"), the CenterPanel flashes with an emerald ring and a toast label appears, so the user knows exactly where to look and what changed.</p>
  </div>

  <div>
    <div class="wireframe-label label-after">DESKTOP ‚Äî PULSE FEEDBACK ON WIDGET ACTION</div>
    <div class="desktop-frame" id="pulseDemo">
      <div class="desktop-titlebar">
        <div class="dot dot-r"></div><div class="dot dot-y"></div><div class="dot dot-g"></div>
        <span style="margin-left:8px;font-size:11px;color:var(--text-dim)">TradeITM ‚Äî AI Coach</span>
      </div>
      <div class="desktop-screen">
        <div class="chat-panel">
          <div class="nav-header" style="padding:8px 12px">
            <div style="font-size:13px;font-weight:600">AI Coach</div>
          </div>
          <div class="chat-area" style="flex:1;padding:10px">
            <div class="chat-bubble bubble-user" style="font-size:12px">AAPL key levels and chart</div>
            <div class="chat-bubble bubble-ai" style="font-size:12px">
              Here are AAPL's key levels:
              <div class="widget-card" style="font-size:10px">
                <div class="wc-header">
                  <span class="wc-symbol" style="font-size:11px">AAPL</span>
                  <span class="wc-badge">Key Levels</span>
                </div>
                <div class="wc-actions" style="margin-top:6px">
                  <button class="wc-btn wc-btn-primary" style="font-size:9px" onclick="triggerPulse()">üìà Show on Chart</button>
                  <button class="wc-btn" style="font-size:9px">‚öôÔ∏è Options</button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="center-panel" id="centerPanelPulse" style="transition:all 0.3s">
          <div class="context-strip">
            <span class="market-badge badge-open">Open</span>
            <span style="color:var(--text-dim)">SPX</span>
            <span style="color:white;font-weight:500">5,125.42</span>
            <span style="color:var(--emerald);font-size:10px">‚Üë +12.50 (+0.24%)</span>
            <div class="divider-v"></div>
            <div class="setup-chip">üéØ NVDA ¬∑ Breakout Retest <span class="setup-score">87</span></div>
          </div>
          <div class="tab-rail">
            <div class="tab-group-label">Analyze</div>
            <div class="tab-btn active">Chart</div>
            <div class="tab-btn">Options</div>
            <div class="tab-btn">Position</div>
            <div class="tab-group-divider"></div>
            <div class="tab-group-label">Portfolio</div>
            <div class="tab-btn">Journal</div>
            <div class="tab-btn">Tracked</div>
          </div>
          <!-- Pulse toast (hidden by default) -->
          <div class="pulse-toast" id="pulseToast" style="display:none">üìà Chart updated</div>
          <div style="flex:1;display:flex;align-items:center;justify-content:center;padding:16px">
            <div style="text-align:center;color:var(--text-dim);font-size:12px">
              <div style="font-size:24px;margin-bottom:8px">üìà</div>
              AAPL 15min chart with key levels loaded
            </div>
          </div>
        </div>
      </div>
    </div>
    <div style="text-align:center;margin-top:8px;font-size:11px;color:var(--text-dim)">
      üëÜ Click "Show on Chart" to see the pulse animation
    </div>
  </div>

  <div class="annotation-box">
    <h4>Pulse Behavior</h4>
    <ul class="annotation-list">
      <li>Emerald ring (#10B981, 40% opacity) flashes around CenterPanel border</li>
      <li>Toast label appears top-right: "Chart updated", "Options loaded", "Alert panel open", etc.</li>
      <li>Auto-clears after 1.2 seconds</li>
      <li>If a new action fires before timeout, the previous pulse is replaced (no stacking)</li>
      <li>Tab rail auto-scrolls to the activated tab</li>
      <li>Only fires on desktop (window.innerWidth >= 1024)</li>
    </ul>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<!-- PHASE 10: CONTEXT STRIP                                                                    -->
<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="phase-content" id="phase-p10">
  <div class="phase-header">
    <h2>Phase 10 ‚Äî Context Strip Replaces Welcome Dashboard</h2>
    <p>A slim persistent strip showing SPX price, market status, and top setup replaces the full-page Welcome view as the default. CenterPanel now defaults to Chart view.</p>
  </div>

  <div class="before-after">
    <div>
      <div class="wireframe-label label-before">BEFORE ‚Äî WELCOME AS DEFAULT</div>
      <div style="border:1px solid var(--border);border-radius:12px;overflow:hidden;background:var(--bg)">
        <div style="padding:24px;text-align:center">
          <div style="font-size:28px;margin-bottom:8px">üëã</div>
          <div style="font-size:16px;font-weight:600;margin-bottom:8px">Welcome to AI Coach</div>
          <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;max-width:400px;margin:0 auto">
            <div style="padding:16px;background:rgba(255,255,255,0.03);border:1px solid var(--border);border-radius:8px;font-size:11px;color:var(--text-dim)">üìà SPX 5,125.42<br>+12.50 (+0.24%)</div>
            <div style="padding:16px;background:rgba(255,255,255,0.03);border:1px solid var(--border);border-radius:8px;font-size:11px;color:var(--text-dim)">üéØ NVDA Breakout<br>Score: 87</div>
            <div style="padding:16px;background:rgba(255,255,255,0.03);border:1px solid var(--border);border-radius:8px;font-size:11px;color:var(--text-dim)">üí¨ Quick Prompt</div>
            <div style="padding:16px;background:rgba(255,255,255,0.03);border:1px solid var(--border);border-radius:8px;font-size:11px;color:var(--text-dim)">üí¨ Quick Prompt</div>
          </div>
          <div style="margin-top:12px;font-size:10px;color:var(--red)">‚Üë Full page dedicated to info that could be a slim bar</div>
        </div>
        <div class="tab-rail">
          <div class="tab-group-label" style="opacity:0.3">Analyze</div>
          <div class="tab-btn">Chart</div><div class="tab-btn">Options</div>
        </div>
      </div>
    </div>

    <div>
      <div class="wireframe-label label-after">AFTER ‚Äî CONTEXT STRIP + CHART DEFAULT</div>
      <div style="border:1px solid var(--border);border-radius:12px;overflow:hidden;background:var(--bg)">
        <!-- Context strip -->
        <div class="context-strip">
          <span class="market-badge badge-open">Open</span>
          <span style="color:var(--text-dim)">SPX</span>
          <span style="color:white;font-weight:500">5,125.42</span>
          <span style="color:var(--emerald);font-size:10px">‚Üë +12.50 (+0.24%)</span>
          <div class="divider-v"></div>
          <div class="setup-chip">üéØ NVDA ¬∑ Breakout Retest <span class="setup-score">87</span></div>
          <span style="flex:1"></span>
          <span style="color:var(--text-faint);font-size:10px;cursor:pointer">‚Üª</span>
        </div>
        <!-- Tab rail with ALWAYS-VISIBLE labels -->
        <div class="tab-rail" style="padding-top:16px;position:relative">
          <div class="tab-group-label" style="position:absolute;top:2px;left:12px">ANALYZE</div>
          <div class="tab-btn active">Chart</div><div class="tab-btn">Options</div><div class="tab-btn">Position</div>
          <div class="tab-group-divider"></div>
          <div class="tab-group-label" style="position:absolute;top:2px;left:230px">PORTFOLIO</div>
          <div class="tab-btn">Journal</div><div class="tab-btn">Tracked</div>
          <div class="tab-group-divider"></div>
          <div class="tab-group-label" style="position:absolute;top:2px;left:380px">MONITOR</div>
          <div class="tab-btn">Alerts</div><div class="tab-btn">Scanner</div>
        </div>
        <!-- Chart is now the default -->
        <div style="height:280px;display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg,rgba(16,185,129,0.02) 0%,transparent 100%)">
          <div style="text-align:center;color:var(--text-dim);font-size:12px">
            <div style="font-size:24px;margin-bottom:8px">üìà</div>
            Chart loads immediately ‚Äî no Welcome page to click through
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="annotation-box">
    <h4>What Changed</h4>
    <ul class="annotation-list">
      <li><strong>Context strip (36px tall):</strong> Market status badge + SPX ticker + top setup chip + refresh button</li>
      <li><strong>Default view:</strong> Chart instead of Welcome ‚Äî saves one click for every session</li>
      <li><strong>Tab group labels:</strong> Always visible (not hover-only) so users discover the groupings</li>
      <li><strong>Welcome still accessible:</strong> via Home button in tab rail, just no longer the default</li>
      <li><strong>Duplicate data removed:</strong> SPX ticker and Next Best Setup hidden from Welcome when context strip is showing</li>
      <li><strong>Strip refreshes:</strong> SPX every 60s, Setup every 120s</li>
      <li><strong>Setup chip is clickable:</strong> Sends a prompt to AI Coach for full trade plan expansion</li>
    </ul>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<!-- PHASE 11: MINI-CHAT OVERLAY                                                                -->
<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="phase-content" id="phase-p11">
  <div class="phase-header">
    <h2>Phase 11 ‚Äî Floating Mini-Chat on Collapse</h2>
    <p>When the chat panel is collapsed (Cmd+B), a draggable mini-chat overlay appears in the corner showing the last 5 messages and a compact input. You can keep chatting while using the full CenterPanel.</p>
  </div>

  <div>
    <div class="wireframe-label label-after">DESKTOP ‚Äî COLLAPSED CHAT WITH MINI-CHAT OVERLAY</div>
    <div class="desktop-frame">
      <div class="desktop-titlebar">
        <div class="dot dot-r"></div><div class="dot dot-y"></div><div class="dot dot-g"></div>
        <span style="margin-left:8px;font-size:11px;color:var(--text-dim)">TradeITM ‚Äî AI Coach (Chat collapsed)</span>
      </div>
      <div class="desktop-screen">
        <!-- Full width center panel (chat collapsed) -->
        <div class="center-panel">
          <div class="context-strip">
            <span class="market-badge badge-open">Open</span>
            <span style="color:var(--text-dim)">SPX</span>
            <span style="color:white;font-weight:500">5,125.42</span>
            <span style="color:var(--emerald);font-size:10px">‚Üë +12.50</span>
            <div class="divider-v"></div>
            <div class="setup-chip">üéØ NVDA ¬∑ Breakout <span class="setup-score">87</span></div>
          </div>
          <div class="tab-rail" style="padding-top:16px;position:relative">
            <div class="tab-group-label" style="position:absolute;top:2px;left:12px">ANALYZE</div>
            <div class="tab-btn active">Chart</div><div class="tab-btn">Options</div><div class="tab-btn">Position</div>
            <div class="tab-group-divider"></div>
            <div class="tab-group-label" style="position:absolute;top:2px;left:260px">PORTFOLIO</div>
            <div class="tab-btn">Journal</div><div class="tab-btn">Tracked</div>
          </div>
          <div style="flex:1;display:flex;align-items:center;justify-content:center">
            <div style="text-align:center;color:var(--text-dim);font-size:12px">
              <div style="font-size:32px;margin-bottom:8px">üìà</div>
              Full-width AAPL chart with key levels
            </div>
          </div>

          <!-- MINI CHAT OVERLAY -->
          <div class="mini-chat-overlay">
            <div class="mini-chat-header">
              <div style="display:flex;align-items:center;gap:6px">
                <span style="color:var(--emerald);font-size:12px">üí¨</span>
                <span style="font-size:11px;font-weight:600;color:white">AI Coach</span>
                <span style="width:5px;height:5px;border-radius:50%;background:var(--emerald)"></span>
              </div>
              <div style="display:flex;gap:4px">
                <span style="cursor:pointer;color:var(--text-dim);font-size:11px;padding:2px 6px;border-radius:4px;background:rgba(255,255,255,0.03)" title="Expand to full panel (Cmd+B)">‚§¢</span>
                <span style="cursor:pointer;color:var(--text-dim);font-size:11px;padding:2px 6px;border-radius:4px;background:rgba(255,255,255,0.03)" title="Minimize to bubble">‚úï</span>
              </div>
            </div>
            <div class="mini-chat-messages">
              <div class="mini-msg mini-msg-user">What are the key levels for AAPL?</div>
              <div class="mini-msg mini-msg-ai">AAPL key levels: R1 $192.50, PP $189.00, S1 $186.20. The GEX profile shows positive gamma...</div>
              <div class="mini-msg mini-msg-user">Show me the chart</div>
              <div class="mini-msg mini-msg-ai">Chart loaded with key levels mapped. R1 acting as resistance, pivot support holding.</div>
              <div class="mini-msg mini-msg-user">What about options flow?</div>
            </div>
            <div class="mini-chat-input">
              <input type="text" placeholder="Quick message..." style="font-family:inherit">
              <div class="mini-send">
                <svg width="12" height="12" viewBox="0 0 24 24" fill="white"><path d="M2 21l21-9L2 3v7l15 2-15 2v7z"/></svg>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div style="display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-top:20px">
    <div class="annotation-box" style="margin-top:0">
      <h4>Mini-Chat Features</h4>
      <ul class="annotation-list">
        <li>320√ó400px floating panel, positioned bottom-left</li>
        <li>Draggable ‚Äî user can reposition anywhere on screen</li>
        <li>Shows last 5 messages (truncated to 200 chars each)</li>
        <li>Compact input with send button ‚Äî full chat functionality</li>
        <li>‚§¢ button expands back to full chat panel (Cmd+B)</li>
        <li>‚úï button minimizes to a bubble (just icon + message count)</li>
      </ul>
    </div>
    <div class="annotation-box" style="margin-top:0">
      <h4>Before vs After</h4>
      <ul class="annotation-list">
        <li><strong style="color:var(--red)">Before:</strong> Collapsing chat shows a static "Chat" button ‚Äî no context, no input</li>
        <li><strong style="color:var(--emerald)">After:</strong> Floating mini-chat shows recent conversation, lets you keep chatting</li>
        <li>User gets full-width CenterPanel AND chat access simultaneously</li>
        <li>Minimized bubble shows message count + streaming indicator</li>
      </ul>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<!-- PHASE 13: HOVER COORDINATION                                                               -->
<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="phase-content" id="phase-p13">
  <div class="phase-header">
    <h2>Phase 13 ‚Äî Cross-Panel Hover Coordination</h2>
    <p>Hover a price level in chat ‚Üí the chart annotation pulses. Hover a chart level ‚Üí the source chat message highlights. Both panels are connected by a shared hover state via CustomEvents.</p>
  </div>

  <div>
    <div class="wireframe-label label-after">DESKTOP ‚Äî HOVER COORDINATION</div>
    <div class="desktop-frame" id="hoverDemo">
      <div class="desktop-titlebar">
        <div class="dot dot-r"></div><div class="dot dot-y"></div><div class="dot dot-g"></div>
        <span style="margin-left:8px;font-size:11px;color:var(--text-dim)">TradeITM ‚Äî AI Coach</span>
      </div>
      <div class="desktop-screen">
        <div class="chat-panel">
          <div class="nav-header" style="padding:8px 12px">
            <div style="font-size:13px;font-weight:600">AI Coach</div>
          </div>
          <div class="chat-area" style="flex:1;padding:10px">
            <div class="chat-bubble bubble-user" style="font-size:12px">AAPL key levels</div>
            <div class="chat-bubble bubble-ai" style="font-size:12px" id="hoverMsg">
              Key levels for AAPL:
              <div class="widget-card" style="font-size:10px">
                <div class="wc-header"><span class="wc-symbol" style="font-size:11px">AAPL</span><span class="wc-badge">Key Levels</span></div>
                <div style="margin-top:6px;display:flex;flex-direction:column;gap:3px">
                  <div style="display:flex;justify-content:space-between;padding:4px 6px;border-radius:4px;cursor:pointer;transition:all 0.15s" class="level-row" onmouseenter="highlightLevel(this,'r1')" onmouseleave="clearHighlight()">
                    <span style="color:#ef4444;font-size:10px">R1</span>
                    <span style="color:var(--text-dim);font-size:10px">$192.50</span>
                  </div>
                  <div style="display:flex;justify-content:space-between;padding:4px 6px;border-radius:4px;cursor:pointer;transition:all 0.15s" class="level-row" onmouseenter="highlightLevel(this,'pp')" onmouseleave="clearHighlight()">
                    <span style="color:#f3e5ab;font-size:10px">PP</span>
                    <span style="color:var(--text-dim);font-size:10px">$189.00</span>
                  </div>
                  <div style="display:flex;justify-content:space-between;padding:4px 6px;border-radius:4px;cursor:pointer;transition:all 0.15s" class="level-row" onmouseenter="highlightLevel(this,'s1')" onmouseleave="clearHighlight()">
                    <span style="color:var(--emerald);font-size:10px">S1</span>
                    <span style="color:var(--text-dim);font-size:10px">$186.20</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="center-panel">
          <div class="context-strip">
            <span class="market-badge badge-open">Open</span>
            <span style="color:var(--text-dim)">SPX</span>
            <span style="color:white;font-weight:500">5,125.42</span>
          </div>
          <div class="tab-rail"><div class="tab-btn active">Chart</div><div class="tab-btn">Options</div></div>
          <div style="flex:1;position:relative;padding:16px">
            <svg viewBox="0 0 500 350" style="width:100%;height:100%">
              <path d="M10,300 L50,280 L90,260 L130,270 L170,240 L210,220 L250,230 L290,200 L330,180 L370,160 L410,140 L450,150 L490,120" stroke="var(--emerald)" fill="none" stroke-width="2.5"/>
              <!-- R1 level -->
              <line x1="0" y1="80" x2="500" y2="80" stroke="#ef4444" stroke-dasharray="4,3" opacity="0.5" id="chartR1"/>
              <rect x="2" y="68" width="70" height="16" rx="3" fill="transparent" id="chartR1bg"/>
              <text x="6" y="80" fill="#ef4444" font-size="10" id="chartR1text">R1 $192.50</text>
              <!-- PP level -->
              <line x1="0" y1="180" x2="500" y2="180" stroke="#f3e5ab" stroke-dasharray="4,3" opacity="0.5" id="chartPP"/>
              <rect x="2" y="168" width="70" height="16" rx="3" fill="transparent" id="chartPPbg"/>
              <text x="6" y="180" fill="#f3e5ab" font-size="10" id="chartPPtext">PP $189.00</text>
              <!-- S1 level -->
              <line x1="0" y1="280" x2="500" y2="280" stroke="var(--emerald)" stroke-dasharray="4,3" opacity="0.5" id="chartS1"/>
              <rect x="2" y="268" width="65" height="16" rx="3" fill="transparent" id="chartS1bg"/>
              <text x="6" y="280" fill="var(--emerald)" font-size="10" id="chartS1text">S1 $186.20</text>
            </svg>
          </div>
        </div>
      </div>
    </div>
    <div style="text-align:center;margin-top:8px;font-size:11px;color:var(--text-dim)">
      üëÜ Hover over the level rows (R1, PP, S1) in the chat panel to see cross-panel highlighting
    </div>
  </div>

  <div class="annotation-box">
    <h4>Hover Coordination Flow</h4>
    <ul class="annotation-list">
      <li><strong>Chat ‚Üí Chart:</strong> Hovering a level row in a widget card dispatches <code>ai-coach-hover-coordinate</code> event</li>
      <li><strong>Chart responds:</strong> The matching level line gets brighter, label gets a highlight ring</li>
      <li><strong>Chart ‚Üí Chat:</strong> Hovering a chart level dispatches the same event ‚Äî source message gets an emerald ring</li>
      <li><strong>Clear:</strong> Mouse leave dispatches <code>ai-coach-hover-clear</code> ‚Äî all highlights removed</li>
      <li>Uses debounced CustomEvents ‚Äî no re-renders unless actively hovering</li>
      <li>Works with key_levels, gex_profile, and spx_game_plan widget cards</li>
    </ul>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<!-- JAVASCRIPT                                                                                 -->
<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<script>
  // Phase tab switching
  document.getElementById('phaseTabs').addEventListener('click', (e) => {
    const tab = e.target.closest('.phase-tab');
    if (!tab) return;
    const phase = tab.dataset.phase;

    document.querySelectorAll('.phase-tab').forEach(t => t.classList.remove('active'));
    tab.classList.add('active');

    document.querySelectorAll('.phase-content').forEach(c => c.classList.remove('active'));
    document.getElementById('phase-' + phase)?.classList.add('active');
  });

  // Phase 3: Tool sheet toggle
  function toggleSheet() {
    const sheet = document.getElementById('toolSheet');
    sheet.classList.toggle('sheet-hidden');
  }

  // Phase 5: More panel toggle
  function toggleMorePanel() {
    const panel = document.getElementById('morePanel');
    panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
  }
  function toggleSheet2(view) {
    alert('Opens full-screen ' + view.charAt(0).toUpperCase() + view.slice(1) + ' sheet (slides up over chat)');
  }

  // Phase 8: Pulse demo
  function triggerPulse() {
    const panel = document.getElementById('centerPanelPulse');
    const toast = document.getElementById('pulseToast');
    panel.classList.add('pulse-active');
    toast.style.display = 'block';
    setTimeout(() => {
      panel.classList.remove('pulse-active');
      toast.style.display = 'none';
    }, 1200);
  }

  // Phase 13: Hover coordination
  const levelMap = {
    r1: { line: 'chartR1', bg: 'chartR1bg', text: 'chartR1text', color: '#ef4444' },
    pp: { line: 'chartPP', bg: 'chartPPbg', text: 'chartPPtext', color: '#f3e5ab' },
    s1: { line: 'chartS1', bg: 'chartS1bg', text: 'chartS1text', color: '#10B981' },
  };

  function highlightLevel(el, level) {
    // Highlight the row in chat
    el.style.background = 'rgba(16,185,129,0.08)';
    el.style.outline = '1px solid rgba(16,185,129,0.3)';
    el.style.borderRadius = '4px';

    // Highlight the message
    const msg = document.getElementById('hoverMsg');
    msg.style.outline = '1px solid rgba(16,185,129,0.25)';
    msg.style.borderRadius = '16px';

    // Highlight chart level
    const map = levelMap[level];
    if (map) {
      document.getElementById(map.line).setAttribute('opacity', '1');
      document.getElementById(map.line).setAttribute('stroke-width', '2');
      document.getElementById(map.bg).setAttribute('fill', 'rgba(16,185,129,0.1)');
      document.getElementById(map.text).setAttribute('font-weight', 'bold');
      document.getElementById(map.text).setAttribute('font-size', '12');
    }
  }

  function clearHighlight() {
    // Clear row highlights
    document.querySelectorAll('.level-row').forEach(row => {
      row.style.background = '';
      row.style.outline = '';
    });

    // Clear message highlight
    const msg = document.getElementById('hoverMsg');
    if (msg) { msg.style.outline = ''; }

    // Clear chart highlights
    Object.values(levelMap).forEach(map => {
      document.getElementById(map.line)?.setAttribute('opacity', '0.5');
      document.getElementById(map.line)?.setAttribute('stroke-width', '1');
      document.getElementById(map.bg)?.setAttribute('fill', 'transparent');
      document.getElementById(map.text)?.setAttribute('font-weight', 'normal');
      document.getElementById(map.text)?.setAttribute('font-size', '10');
    });
  }
</script>

</body>
</html>
